<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Play - MiniGame 2202</title>
  <link rel="stylesheet" href="css/app.css" />
</head>
<body>
  <div class="topbar">
    <a class="link" href="index.html">← Trang chính</a>
    <div class="title" id="sceneTitle">Day ?</div>
    <button class="btnGhost" id="btnShowRef">Hiển thị tranh gốc</button>
  </div>

  <main class="container">
    <section class="card gameCard">
      <div class="gameHud">
        <div class="hudItem">
          <div class="hudLabel">Thời gian</div>
          <div class="hudValue" id="timeLeft">01:30</div>
        </div>
        <div class="hudItem">
          <div class="hudLabel">Tiến độ đúng</div>
          <div class="hudValue" id="progress">0%</div>
        </div>
        <div class="hudItem">
          <div class="hudLabel">Cách chơi</div>
          <div class="hudSmall">
            Kéo-thả để đổi chỗ (swap) • Hoặc chạm 2 mảnh để swap
          </div>
        </div>
      </div>

      <div class="puzzleWrap">
        <div class="puzzleBoard disabled" id="board"></div>

        <div class="side">
          <div class="panel">
            <div class="panelTitle">Trạng thái</div>
            <div class="mono" id="status">Xem tranh gốc, bấm “Tôi đã nhớ” để bắt đầu.</div>

            <div class="row" style="margin-top:10px">
              <button class="btn" id="btnStart">Bắt đầu</button>
              <button class="btnGhost" id="btnShuffle">Trộn lại</button>
              <button class="btnGhost" id="btnRestart">Chơi lại</button>
            </div>

            <div class="row" style="margin-top:10px">
            </div>

            <div class="note">
              Tip: Nếu bạn không muốn kéo-thả, tắt “Bật kéo-thả” rồi chạm 2 mảnh để đổi chỗ.
            </div>
          </div>
        </div>
      </div>

      <div class="note">
        - Đạt <b>100%</b> trước khi hết giờ ⇒ nhận số ngay.<br/>
        - Hết giờ mà <b>≥ 80%</b> ⇒ chọn <b>1 trong 3 gương</b> (1 đúng).<br/>
        - Ngày 3 nhận <b>2 số</b>.
      </div>
    </section>
  </main>

  <!-- MODALS -->
  <div class="modal" id="modalRef">
    <div class="modalBox">
      <h3>Tranh gốc (hãy ghi nhớ!)</h3>
      <div class="refWrap">
        <img id="refImg" alt="reference" />
      </div>
      <div class="row">
        <button class="btn" id="btnIRemember">Tôi đã nhớ → Chơi</button>
        <button class="btnGhost" id="btnCloseRef">Đóng</button>
      </div>
      <div class="note">Game bắt đầu tính giờ sau khi bạn bấm “Tôi đã nhớ”.</div>
    </div>
  </div>

  <div class="modal" id="modalResult">
    <div class="modalBox">
      <h3 id="resultTitle">Kết quả</h3>
      <div class="mono" id="resultText"></div>
      <div class="row" id="resultActions"></div>
    </div>
  </div>

  <div class="modal" id="modalMirror">
    <div class="modalBox">
      <h3>Chọn Gương Báu</h3>
      <div class="note">Chỉ <b>1</b> trong 3 gương có con số đúng để bạn đi tiếp.</div>
      <div class="mirrorGrid" id="mirrorGrid"></div>
      <div class="row">
        <button class="btnGhost" id="btnMirrorCancel">Đóng</button>
      </div>
    </div>
  </div>

  <script src="js/config.js"></script>
  <script src="js/storage.js"></script>
<script src="js/play.js?v=final_drag_20260220"></script>
</body>
</html>